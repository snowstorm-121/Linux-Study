> ### å†™åœ¨å‰é¢ï¼š
> 
> æˆ‘çš„Linuxçš„å­¦ä¹ ä¹‹è·¯éå¸¸åå·ã€‚ç¬¬ä¸€æ¬¡å­¦ä¹ Linuxæ˜¯åœ¨å¤§ä¸€ä¸‹çš„å¼€å­¦æ²¡å¤šä¹…ï¼Œç»“æœå› ä¸ºä¸ä¼šå®‰è£…VMwareå°±æ— ç–¾è€Œç»ˆäº†ï¼Œå¯ä»¥è¯´æ˜¯æ²¡å¼€å§‹å°±å¤±è´¥äº†ã€‚ç¬¬äºŒæ¬¡å­¦ä¹ Linuxæ˜¯åœ¨å¤§ä¸€ä¸‹å¿«æ”¾æš‘å‡ï¼ˆé‚£ä¸ªæ—¶å€™åˆšåˆšè¿‡å®Œè€ƒè¯•å‘¨ï¼‰ï¼Œæˆ‘æ²¡ä»€ä¹ˆäº‹åšå°±åˆé‡æ‹¾Linuxï¼Œä¸æœè¾“çš„æˆ‘é€‰æ‹©å†æˆ˜Linuxï¼Œè¿™ä¸€æ¬¡å­¦ä¹ è¿˜ç®—é¡ºåˆ©ï¼Œè™½ç„¶ä¸­é—´æœ‰äº›å°æ’æ›²ä½†æ˜¯ä¸å½±å“æ•´ä½“å­¦ä¹ è¿›åº¦ï¼Œ æˆ‘çœ‹ç€Bç«™ä¸Šçš„è§†é¢‘ä¸€ç‚¹ç‚¹å­¦ä¹ Linuxï¼ŒåŸºæœ¬ä¸ŠæŠŠLinuxçš„åŸºç¡€æŒ‡ä»¤å­¦å®Œäº†ã€‚å­¦å®Œä¹‹åæˆ‘åˆé‡åˆ°é—®é¢˜äº†ï¼Œè§†é¢‘åŸºæœ¬ä¸Šåˆ°è¿™å°±ç»“æŸäº†ï¼Œè€Œæˆ‘å´ä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥å­¦ä»€ä¹ˆï¼Œäºæ˜¯å°±æ²¡æ€ä¹ˆç¢°Linuxï¼Œç»“æœæ²¡è¿‡å¤šé•¿æ—¶é—´æˆ‘å°±æŠŠå­¦çš„LinuxæŒ‡ä»¤å¿˜çš„ä¸€å¹²äºŒå‡€ã€‚ç°åœ¨æ˜¯æˆ‘ç¬¬ä¸‰æ¬¡å­¦ä¹ Linuxï¼Œæˆ‘å†³å®šé‡æ–°å¼€å§‹å­¦Linuxï¼ŒåŒæ—¶ä¸ºäº†è®©è‡ªå·±å­¦ä¹ çš„æ•ˆæœæ›´å¥½ï¼Œæˆ‘é€‰æ‹©ä»¥å†™blogçš„å½¢å¼é€¼è¿«è‡ªå·±æ¯å¤©æŠŠå­¦ä¹ åˆ°çš„LinuxçŸ¥è¯†æ•´ç†ä¸‹æ¥ã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘å†™è¿™ä¸ªç³»åˆ—blogçš„åŸå› ã€‚

---

## ä¿¡å·çš„ç›¸å…³çš„æ¦‚å¿µ

### ä¿¡å·çš„å…±æ€§

- ç®€å•
- ä¸èƒ½æºå¸¦å¤§é‡ä¿¡æ¯
- æ»¡è¶³æ¡ä»¶æ‰èƒ½ å‘é€
  
  ### ä¿¡å·çš„ç‰¹è´¨
  
  ä¿¡å·æ˜¯è½¯ä»¶å±‚é¢çš„â€œä¸­æ–­â€ã€‚ä¸€æ—¦ä¿¡å·äº§ç”Ÿï¼Œæ— è®ºç¨‹åºæ‰§è¡Œåˆ°ä»€ä¹ˆä½ç½®ï¼Œå¿…é¡»ç«‹å³åœæ­¢ï¼Œå¤„ç†ä¿¡å·ï¼Œå¤„ç†ç»“æŸåï¼Œå†ç»§ç»­æ‰§è¡Œåç»­æŒ‡ä»¤ã€‚
  
  > **æ‰€æœ‰ä¿¡å·çš„äº§ç”ŸåŠå¤„ç†å…¨éƒ¨éƒ½æ˜¯ç”±å†…æ ¸å®Œæˆçš„**

### ä¿¡å·çš„äº§ç”Ÿ

1. æŒ‰é”®äº§ç”Ÿã€‚å¦‚`CTRL+c`,`CTRL+z`,`CTRL+\`.
2. ç³»ç»Ÿè°ƒç”¨äº§ç”Ÿã€‚å¦‚`kill`,`raise`,`abort`
3. è½¯ä»¶æ¡ä»¶äº§ç”Ÿã€‚å¦‚å®šæ—¶å™¨`alarm`,`setitimer`,`sleep`
4. ç¡¬ä»¶å¼‚å¸¸äº§ç”Ÿã€‚å¦‚éæ³•è®¿é—®å†…å­˜ï¼ˆæ®µé”™è¯¯ï¼‰ï¼Œå†…å­˜å¯¹é½é”™è¯¯ï¼ˆæ€»çº¿é”™è¯¯ï¼‰
5. å‘½ä»¤äº§ç”Ÿã€‚å¦‚`kill`å‘½ä»¤

### ä¿¡å·çš„ä¸¤ç§çŠ¶æ€

- æœªå†³ï¼šäº§ç”Ÿä¸é€’è¾¾ä¹‹é—´çš„çŠ¶æ€ã€‚
- é€’å†³ï¼šäº§ç”Ÿå¹¶ä¸”é€è¾¾åˆ°è¿›ç¨‹ï¼Œç›´æ¥è¢«å†…æ ¸å¤„ç†æ‰ã€‚

### ä¿¡å·çš„å¤„ç†æ–¹å¼

- æ‰§è¡Œé»˜è®¤åŠ¨ä½œ
- å¿½ç•¥
- æ•æ‰ï¼ˆè‡ªå®šä¹‰ï¼‰

### ä¿¡å·å±è”½å­—å’Œæœªå†³ä¿¡å·é›†

![1](https://img-blog.csdnimg.cn/direct/4361e91137ad4214a48085d2a86c8915.png#pic_center)

- é˜»å¡ä¿¡å·é›†ï¼ˆä¿¡å·å±è”½å­—ï¼‰ï¼šæœ¬è´¨æ˜¯ä½å›¾ã€‚ç”¨æ¥è®°å½•ä¿¡å·çš„å±è”½çŠ¶æ€ã€‚ä¸€æ—¦è¢«å±è”½çš„ä¿¡å·ï¼Œåœ¨è§£é™¤å±è”½å‰ï¼Œä¸€ç›´å¤„äºæœªå†³æ€ã€‚
- æœªå†³ä¿¡å·é›†ï¼šæœ¬è´¨æ˜¯ä½å›¾ã€‚ç”¨æ¥è®°å½•ä¿¡å·çš„å¤„ç†çŠ¶æ€ã€‚è¯¥ä¿¡å·é›†ä¸­çš„ä¿¡å·ï¼Œè¡¨ç¤ºï¼Œå·²ç»äº§ç”Ÿï¼Œä½†å°šæœªè¢«å¤„ç†ã€‚

### ä¿¡å·å››è¦ç´ 

- ç¼–å·
- åç§°
- å¯¹åº”äº‹ä»¶
- é»˜è®¤å¤„ç†åŠ¨ä½œ
  
  > **ä¿¡å·ä½¿ç”¨ä¹‹å‰ï¼Œåº”å…ˆç¡®å®šå…¶4è¦ç´ ï¼Œè€Œåå†ç”¨ï¼ï¼ï¼**

### å¸¸è§„ä¿¡å·

| **ç¼–å·** | **åç§°**    | **å¯¹åº”äº‹ä»¶**                                                                   | **é»˜è®¤å¤„ç†åŠ¨ä½œ**                                           |
|:------:|:---------:|:--------------------------------------------------------------------------:|:----------------------------------------------------:|
| 1      | SIGHUP    | æœ¬ä¿¡å·åœ¨ç”¨æˆ·ç»ˆç«¯è¿æ¥(æ­£å¸¸æˆ–éæ­£å¸¸)ç»“æŸæ—¶å‘å‡º, é€šå¸¸æ˜¯åœ¨ç»ˆç«¯çš„æ§åˆ¶è¿›ç¨‹ç»“æŸæ—¶, é€šçŸ¥åŒä¸€sessionå†…çš„å„ä¸ªä½œä¸š, è¿™æ—¶å®ƒä»¬ä¸æ§åˆ¶ç»ˆç«¯ä¸å†å…³è”ã€‚ | æŒ‚æ–­                                                   |
| 2      | SIGINT    | åœ¨ç”¨æˆ·é”®å…¥INTRå­—ç¬¦(é€šå¸¸æ˜¯Ctrl+C)æ—¶å‘å‡º                                                  | é€šçŸ¥å‰å°è¿›ç¨‹ç»„ç»ˆæ­¢è¿›ç¨‹                                          |
| 3      | SIGQUIT   | ç”±QUITå­—ç¬¦(é€šå¸¸æ˜¯Ctrl+)æ¥æ§åˆ¶                                                       | è¿›ç¨‹åœ¨å› æ”¶åˆ°SIGQUITé€€å‡ºæ—¶ä¼šäº§ç”Ÿcoreæ–‡ä»¶, åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šç±»ä¼¼äºä¸€ä¸ªç¨‹åºé”™è¯¯ä¿¡å·ã€‚        |
| 4      | SIGILL    | é€šå¸¸æ˜¯å› ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æœ¬èº«å‡ºç°é”™è¯¯, æˆ–è€…è¯•å›¾æ‰§è¡Œæ•°æ®æ®µ. å †æ ˆæº¢å‡ºä¹Ÿæœ‰å¯èƒ½äº§ç”Ÿè¿™ä¸ªä¿¡å·ã€‚                               | ç»ˆæ­¢ç¨‹åº                                                 |
| 5      | SIGTRAP   | ç”±æ–­ç‚¹æŒ‡ä»¤æˆ–å…¶å®ƒé™·é˜±ï¼ˆtrapï¼‰æŒ‡ä»¤äº§ç”Ÿ                                                       |                                                      |
| 6      | SIGABRT   | è°ƒç”¨abortå‡½æ•°ç”Ÿæˆçš„ä¿¡å·ã€‚                                                            |                                                      |
| 7      | SIGBUS    | è®¿é—®éæ³•åœ°å€                                                                     | ç»ˆæ­¢ç¨‹åº                                                 |
| 8      | SIGFPE    | åœ¨å‘ç”Ÿè‡´å‘½çš„ç®—æœ¯è¿ç®—é”™è¯¯æ—¶å‘å‡º                                                            | ç»ˆæ­¢ç¨‹åº                                                 |
| 9      | SIGKILL   | å‘ç°æŸä¸ªè¿›ç¨‹ç»ˆæ­¢ä¸äº†                                                                 | ç«‹å³ç»“æŸç¨‹åºçš„è¿è¡Œ                                            |
| 10     | SIGUSR1   | ç•™ç»™ç”¨æˆ·è‡ªå®šä¹‰                                                                    | ç•™ç»™ç”¨æˆ·è‡ªå®šä¹‰                                              |
| 11     | SIGSEGV   | è¯•å›¾è®¿é—®æœªåˆ†é…ç»™è‡ªå·±çš„å†…å­˜,æˆ–è¯•å›¾å¾€æ²¡æœ‰å†™æƒé™çš„å†…å­˜åœ°å€å†™æ•°æ®                                            | ç»ˆæ­¢ç¨‹åº                                                 |
| 12     | SIGUSR2   | ç•™ç»™ç”¨æˆ·è‡ªå®šä¹‰                                                                    | ç•™ç»™ç”¨æˆ·è‡ªå®šä¹‰                                              |
| 13     | SIGPIPE   | é€šå¸¸åœ¨è¿›ç¨‹é—´é€šä¿¡äº§ç”Ÿ                                                                 | ç»ˆæ­¢ç¨‹åº                                                 |
| 14     | SIGALRM   | æ—¶é’Ÿå®šæ—¶ä¿¡å·                                                                     | ç»ˆæ­¢ç¨‹åº                                                 |
| 15     | SIGTERM   | ç¨‹åºç»“æŸ(terminate)ä¿¡å·                                                          | ç»ˆæ­¢ç¨‹åº                                                 |
| 16     | SIGCHLD   | å­è¿›ç¨‹ï¼ˆchildï¼‰çŠ¶æ€å˜åŒ–æ—¶, çˆ¶è¿›ç¨‹ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·                                                | å¿½ç•¥                                                   |
| 17     | SIGCONT   |                                                                            | è®©ä¸€ä¸ªåœæ­¢(stopped)çš„è¿›ç¨‹ç»§ç»­æ‰§è¡Œ                                |
| 18     | SIGSTOP   | éœ€è¦æš‚åœæŸä¸€ç¨‹åº                                                                   | æš‚åœ(stopped)è¿›ç¨‹çš„æ‰§è¡Œï¼Œæ³¨æ„å®ƒå’Œterminateä»¥åŠinterruptçš„åŒºåˆ«:è¯¥è¿›ç¨‹è¿˜æœªç»“æŸ |
| 19     | SIGTSTP   | ç”¨æˆ·é”®å…¥SUSPå­—ç¬¦æ—¶(é€šå¸¸æ˜¯Ctrl+Z)å‘å‡ºè¿™ä¸ªä¿¡å·                                               | ç»ˆæ­¢ç¨‹åº                                                 |
| 20     | SIGTTIN   | å½“åå°ä½œä¸šè¦ä»ç”¨æˆ·ç»ˆç«¯è¯»æ•°æ®æ—¶, è¯¥ä½œä¸šä¸­çš„æ‰€æœ‰è¿›ç¨‹ä¼šæ”¶åˆ°SIGTTINä¿¡å·. ç¼ºçœæ—¶è¿™äº›è¿›ç¨‹ä¼šåœæ­¢æ‰§è¡Œ.                      | ç»ˆæ­¢ç¨‹åº                                                 |
| 21     | SIGTTOU   | ç±»ä¼¼äºSIGTTIN, ä½†åœ¨å†™ç»ˆç«¯(æˆ–ä¿®æ”¹ç»ˆç«¯æ¨¡å¼)æ—¶æ”¶åˆ°                                              | ç»ˆæ­¢ç¨‹åº                                                 |
| 22     | SIGURG    | æœ‰â€ç´§æ€¥â€æ•°æ®æˆ–out-of-bandæ•°æ®åˆ°è¾¾socketæ—¶äº§ç”Ÿ.                                          | ç»ˆæ­¢ç¨‹åº                                                 |
| 23     | SIGXCPU   | è¶…è¿‡CPUæ—¶é—´èµ„æºé™åˆ¶                                                                | ç»ˆæ­¢ç¨‹åº                                                 |
| 24     | SIGXFSZ   | å½“è¿›ç¨‹ä¼å›¾æ‰©å¤§æ–‡ä»¶ä»¥è‡³äºè¶…è¿‡æ–‡ä»¶å¤§å°èµ„æºé™åˆ¶ã€‚                                                    | ç»ˆæ­¢ç¨‹åº                                                 |
| 25     | SIGVTALRM | è™šæ‹Ÿæ—¶é’Ÿä¿¡å·                                                                     | ç»ˆæ­¢ç¨‹åº                                                 |
| 26     | SIGPROF   | ç±»ä¼¼äºSIGALRM/SIGVTALRM, ä½†åŒ…æ‹¬è¯¥è¿›ç¨‹ç”¨çš„CPUæ—¶é—´ä»¥åŠç³»ç»Ÿè°ƒç”¨çš„æ—¶é—´.                              | ç»ˆæ­¢ç¨‹åº                                                 |
| 27     | SIGWINCH  | çª—å£å¤§å°æ”¹å˜æ—¶å‘å‡º.                                                                 | ç»ˆæ­¢ç¨‹åº                                                 |
| 28     | SIGIO     | æ–‡ä»¶æè¿°ç¬¦å‡†å¤‡å°±ç»ª, å¯ä»¥å¼€å§‹è¿›è¡Œè¾“å…¥/è¾“å‡ºæ“ä½œ.                                                  | ç»ˆæ­¢ç¨‹åº                                                 |
| 29     | SIGPWR    | Power failure                                                              | ç»ˆæ­¢ç¨‹åº                                                 |
| 30     | SIGSYS    | éæ³•çš„ç³»ç»Ÿè°ƒç”¨ã€‚                                                                   | ç»ˆæ­¢ç¨‹åº                                                 |

> ç”±äº**åˆå­¦**ï¼Œåé¢çš„ä¸€äº›ä¿¡å·æˆ‘**ä¸æ•¢ä¿è¯æ­£ç¡®æ€§**ï¼ˆåé¢çš„éƒ½æ˜¯æˆ‘**æŸ¥èµ„æ–™cvè¿‡æ¥**çš„ï¼Œç­‰æˆ‘å­¦æ˜ç™½ä¹‹åæˆ‘ä¼šæ¥**æ›´æ–°è¿™ä¸ªè¡¨æ ¼**ï¼‰
> ä¸Šé¢åˆ—å‡ºçš„ä¿¡å·ä¸­ï¼Œç¨‹åº**ä¸å¯æ•æ‰ï¼Œé˜»å¡ï¼Œå¿½ç•¥**çš„æ˜¯`SIGKILL`,`SIGSTOP`

---

## killå‡½æ•°

`int kill(pid_t  pid, int signum`

### å‚æ•°

- `pid`:
  - `>0`ï¼Œå‘é€ä¿¡å·ç»™æŒ‡å®šçš„è¿›ç¨‹
  - `=0`,å‘é€ä¿¡å·ç»™è·Ÿè°ƒç”¨killå‡½æ•°çš„é‚£ä¸ªè¿›ç¨‹å¤„äºåŒä¸€è¿›ç¨‹ç»„çš„è¿›ç¨‹ã€‚
  - `<-1`ï¼Œå–ç»å¯¹å€¼ï¼Œå‘é€ä¿¡å·ç»™è¯¥ç»å¯¹å€¼æ‰€å¯¹åº”çš„è¿›ç¨‹ç»„çš„æ‰€æœ‰ç»„å‘˜ã€‚
  - `=-1`,å‘é€ä¿¡å·ç»™ï¼Œæœ‰æƒé™å‘é€çš„æ‰€æœ‰è¿›ç¨‹ã€‚
- `signum`,å¾…å‘é€çš„ä¿¡å·

### è¿”å›å€¼

- æˆåŠŸï¼Œ0
- å¤±è´¥ï¼Œ-1ï¼Œ`errno`è¢«è®¾ç½®ã€‚

### ä¸¾ä¸ªæ —å­

æˆ‘ä»¬å†™ä¸€ä¸ªç¨‹åºï¼Œç”¨å­è¿›ç¨‹è°ƒç”¨`kill`æ€æ­»çˆ¶è¿›ç¨‹
æºä»£ç ï¼š

```c
#include<stdio.h>
#include<unistd.h>
#include<signal.h>

int main()
{
    pid_t pid;
    pid=fork();
    if(0==pid)
{
        printf("I am child,i will kill my parent\n");
        sleep(1);
        int res=kill(getppid(),SIGKILL);
        if(res==-1)
            perror("kill error");
    }
    else 
    {
        for(int i=0;;i++)    
            printf("%d-------I am parent, i will be killed by my child\n",i);
    }
    return 0;
}
```

æ•ˆæœï¼š
![1](https://img-blog.csdnimg.cn/direct/0f61cc2b5e5c47309221a427be8bcfaa.png#pic_center)

---

## alarmå‡½æ•°

æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰å”¯ä¸€çš„é—¹é’Ÿ
`unsigned int alarm(unsigned int seconds)`

### å‚æ•°

- secondï¼Œå®šæ—¶çš„ç§’æ•°ï¼Œå•ä½æ˜¯`s`

### è¿”å›å€¼

- ä¸Šæ¬¡å®šæ—¶å‰©ä½™çš„æ—¶é—´

### å–æ¶ˆé—¹é’Ÿ

`alarm(0);`

### ä¸¾ä¸ªæ —å­

æˆ‘ä»¬ä½¿ç”¨`alarm`æ¥è®¡æ—¶ï¼Œç»Ÿè®¡è®¡ç®—æœºä¸€ç§’é’Ÿèƒ½æ‰“å°å¤šå°‘ã€‚
æºä»£ç 

```c
#include<stdio.h>
#include<unistd.h>

int main()
{
    alarm(1);
    int i;
    for(i=0;;i++)
        printf("%d\n",i);
}
```

æ•ˆæœï¼š
![1](https://img-blog.csdnimg.cn/direct/a36de318942a4b58963c533ae9ca9623.png#pic_center)

---

## setitimerå‡½æ•°

è®¾ç½®é—¹é’Ÿï¼Œå¯ä»¥æ›¿ä»£alarmå‡½æ•°ï¼Œç²¾åº¦å¾®ç§’usï¼Œå¯ä»¥å®ç°å‘¨æœŸå®šæ—¶
`int setitimer(int which,const struct itimerval * new_value,struct itimerval * old_val)`

### å‚æ•°

- `which`:é€‰æ‹©è®¡æ—¶æ–¹å¼
  - `ITIMER_REAL`:é‡‡ç”¨è‡ªç„¶è®¡æ—¶ã€‚ï¼ˆä¸€èˆ¬ç”¨è¿™ä¸ªï¼‰â€”â€”>`SIGALRM`
  - `ITIMER_VIRTUAL`:é‡‡ç”¨ç”¨æˆ·ç©ºé—´è®¡æ—¶â€”â€”>`SIGVTALRM`
  - `ITIMER_PROF`:é‡‡ç”¨å†…æ ¸+ç”¨æˆ·ç©ºé—´è®¡æ—¶â€”â€”>`SIGPROF`
- `new_value`:å®šæ—¶ç§’æ•°
- `old_value`:ä¼ å‡ºå‚æ•°ï¼Œä¸Šæ¬¡å®šæ—¶å‰©ä½™çš„æ—¶é—´.ï¼ˆå¦‚æœä¸å…³å¿ƒçš„è¯ï¼Œå¯ä»¥ç›´æ¥ä¼ `NULL`)

### è¿”å›å€¼

- æˆåŠŸï¼Œ0
- å¤±è´¥ï¼Œ-1ï¼Œ`errno`è¢«è®¾ç½®

### `struct itimerval`ç±»å‹

```c
struct itimerval
{
    struct timeval 
    {
        time_t tv_sec;            /*second*/
        suseconds_t tv_usec;    /*microsecond*/
    }it_interval;                /*ç”¨äºè®¾å®šä¸¤ä¸ªä»»åŠ¡ä¹‹é—´çš„é—´éš”æ—¶é—´*/
    struct timerval
    {
        time_t tv_sec;            /*second*/
        susecond_t tv_usec ;    /*microsecond*/
    }it_value;                    /*ç¬¬ä¸€æ¬¡å®šæ—¶ç§’æ•°*/
}
```

å¯ä»¥ç†è§£æœ‰ä¸¤ä¸ªå®šæ—¶å™¨

- ä¸€ä¸ªç”¨äºç¬¬ä¸€ä¸ªé—¹é’Ÿä»€ä¹ˆæ—¶å€™è§¦å‘
- ç¬¬ä¸€ä¸ªé—¹é’Ÿè§¦å‘åé—´éš”å¤šå°‘æ—¶é—´å†æ¬¡è§¦å‘é—¹é’Ÿã€‚

### ä¸¾ä¸ªæ —å­

#### è®¡æ•°

åŠŸèƒ½å’Œä¸Šé¢çš„`alarm`ä¸€æ ·
æºä»£ç ï¼š

```c
#include<unistd.h>
#include<stdio.h>
#include<sys/time.h>

int main()
{
    struct itimerval t;
    t.it_interval.tv_sec=0;
    t.it_interval.tv_usec=0;

    t.it_value.tv_sec=1;
    t.it_value.tv_usec=0;
    int res=setitimer(ITIMER_REAL,&t,NULL);
    for(int i=0;;i++)
        printf("%d\n",i);
    return 0;
}
```

æ•ˆæœï¼š
![1](https://img-blog.csdnimg.cn/direct/3db06b75e79a4edb98502cbe86f397dc.png#pic_center)

### å‘å±å¹•æ‰“å°ä¿¡æ¯

æºä»£ç ï¼š

```c
#include<unistd.h>
#include<stdio.h>
#include<sys/time.h>
#include<signal.h>

void fun(int signal)
{
    printf("hellow linux\n");
}

int main()
{
    signal(SIGALRM,fun);
    struct itimerval t;
    t.it_interval.tv_sec=2;
    t.it_interval.tv_usec=0;

    t.it_value.tv_sec=1;
    t.it_value.tv_usec=0;
    int res=setitimer(ITIMER_REAL,&t,NULL);
    while(1);
    return 0;
}
```

æ•ˆæœï¼š
![1](https://img-blog.csdnimg.cn/direct/dffeefb97b21414cb5fc1c85226aa007.png#pic_center)

---

## ä¿¡å·é›†æ“ä½œå‡½æ•°

- ä¿¡å·é›†`set`å‡½æ•°
  - `sigset_t set;` ï¼šè‡ªå®šä¹‰ä¿¡å·é›†ï¼ˆè¿™æ˜¯ä¸€ç§ç±»å‹ï¼‰
  - `sigemptyset(sigset_t* set);`ï¼šæ¸…ç©ºä¿¡å·é›†ï¼Œå…¨éƒ¨ç½®ä¸º0
  - `sigfillset(sigset_t * set);`ï¼šå¡«æ»¡ä¿¡å·é›†ï¼Œå…¨éƒ¨ç½®ä¸º1
  - `sigaddset(sigset_t* set);`ï¼šå°†æŒ‡å®šä¿¡å·æ·»åŠ åˆ°ä¿¡å·é›†ä¸­ï¼Œå³å°†æŒ‡å®šä¿¡å·ç½®ä¸º1
  - `sigdelset(sigset_t* set);`ï¼šå°†æŒ‡å®šä¿¡å·ç§»é™¤ä¿¡å·é›†ï¼Œå³å°†æŒ‡å®šä¿¡å·ç½®ä¸º0
  - `sigismember(const sigset_t* set,int signum);`ï¼šåˆ¤æ–­æŒ‡å®šä¿¡å·æ˜¯å¦åœ¨é›†åˆä¸­ã€‚åœ¨â€”>1,ä¸åœ¨â€”>0.
- `sigprocmask`å‡½æ•°
  `int sigprocmask(int how,const sigset_t * set,sigset* oldset);`
  - `how`:
    - `SIG_BLOCK`:è®¾ç½®é˜»å¡ï¼ˆä½ä¸ï¼‰
    - `SIG_UNBLOCK`:å–æ¶ˆé˜»å¡ï¼ˆå–åä½ä¸ï¼‰
    - `SIG_SETMASK`:ç”¨è‡ªå®šä¹‰`set`å¡«å……`mask` ï¼ˆä¸æ¨èï¼‰
  - `set`:è‡ªå®šä¹‰çš„`set`\
  - `oldset`ï¼šæ—§æœ‰çš„`mask`ï¼ˆä¸ç”¨çš„è¯å¯ä»¥ä¼ `NULL`ï¼‰
- `sigpending`å‡½æ•°
  `int sigpending(sigset* set)`
  è¯»å–æœªå†³ä¿¡å·é›†ï¼Œå‚æ•°æ˜¯ä¼ å‡ºçš„æœªå†³ä¿¡å·é›†ã€‚

![1](https://img-blog.csdnimg.cn/direct/44875c1387584901adaab5b22b8b6e52.png#pic_center)

### ä¸¾ä¸ªæ —å­

æºä»£ç ï¼š

```c
#include<stdio.h>
#include<unistd.h>
#include<signal.h>

void print_set(sigset_t* pset)
{
    for(int i=1;i<33;i++)
        if(sigismember(pset,i))
            printf("1");
        else 
            printf("0");
    printf("\n");
}

int main()
{
    sigset_t set,pset;
    sigemptyset(&set);
    sigaddset(&set,SIGINT);
    sigaddset(&set,SIGQUIT);
    sigaddset(&set,SIGKILL);
    sigaddset(&set,SIGHUP);
    sigprocmask(SIG_BLOCK,&set,NULL);
    while(1)
    {
        sigpending(&pset);
        print_set(&pset);
        sleep(1);
    }
    return 0;
}
```

æ•ˆæœ
![2](https://img-blog.csdnimg.cn/direct/af4b8351cfa348538ed5ffc9dfa7f52b.png#pic_center)

---

## signalå®ç°ä¿¡å·æ•æ‰

**æ³¨å†Œ**ä¸€ä¸ªä¿¡å·æ•æ‰å‡½æ•°ï¼ŒANSè®¾ç½®ï¼Œä¸åŒæ“ä½œç³»ç»Ÿå­˜åœ¨å·®å¼‚**å»ºè®®ä½¿ç”¨sigactionå‡½æ•°**
`sighandler_t signal(int signum,sighandler_t handler)`

### å‚æ•°ï¼š

- `signum`     :æ•æ‰ä¿¡å·
- `handler`:æ•æ‰ä¿¡å·åçš„æ“ä½œå‡½æ•°

### è¿”å›å€¼

- æˆåŠŸï¼Œè¿”å›æ“ä½œå‡½æ•°çš„è¿”å›å€¼
- å¤±è´¥ï¼Œè¿”å›`SIG_ERR`,`errno`è¢«è®¾ç½®ã€‚

### ä¸¾ä¸ªæ —å­

æºä»£ç ï¼š

```c
#include<stdio.h>
#include<unistd.h>
#include<signal.h>

void fun(int signal)
{
    printf("hellow linux,SIGQUIT has been not work\n");
}

int main()
{
    signal(SIGQUIT,fun);
    while(1);
}
```

æ•ˆæœï¼š
![1](https://img-blog.csdnimg.cn/direct/c607a7aee7e14981a79f9495c0b5ff25.png#pic_center)

---

## sigactionå®ç°ä¿¡å·æ•æ‰

æ³¨å†Œä¸€ä¸ªä¿¡å·æ•æ‰å‡½æ•°
`int sigaction(int signum,const struct sigaction * act,struct sigaction * oldact)`

### `struct sigaction`ç±»å‹

```c
struct sigaction {
    void     (*sa_handler)(int);        //æ“ä½œå‡½æ•°å
    void     (*sa_sigaction)(int, siginfo_t *, void *);        //ä¸€èˆ¬ä¸ç”¨ç®¡
    sigset_t   sa_mask;        //åªä½œç”¨äºå‡½æ•°æ•æ‰æœŸé—´
    int        sa_flags;    //ä¸€èˆ¬ç½®ä¸º0ï¼Œè¡¨ç¤ºç”¨é»˜è®¤çš„
    void     (*sa_restorer)(void);
};
```

### ä¸¾ä¸ªæ —å­

æºä»£ç ï¼š

```c
#include<stdio.h>
#include<unistd.h>
#include<signal.h>

void fun(int signal)
{
    printf("catch you SIGQUIT\n");
}

int main()
{
    struct sigaction act;
    act.sa_handler=fun;
    sigemptyset(&act.sa_mask);
    act.sa_flags=0;
    sigaction(SIGQUIT,&act,NULL);
    while(1);
}
```

æ•ˆæœï¼š
![1](https://img-blog.csdnimg.cn/direct/72f9f4a7073d4c00bf512fa156250357.png#pic_center)

---

## ä¿¡å·æ•æ‰

### ä¿¡å·æ•æ‰çš„ç‰¹æ€§

- æ•æ‰å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œä¿¡å·å±è”½å­— ç”± `mask` --> `sa_mask` , æ•æ‰å‡½æ•°æ‰§è¡Œç»“æŸã€‚ æ¢å¤å›`mask`
- æ•æ‰å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œæœ¬ä¿¡å·è‡ªåŠ¨è¢«å±è”½(`sa_flgs = 0`).å…¶ä»–ä¿¡å·ä¸å±è”½ï¼Œå¦‚éœ€å±è”½åˆ™è°ƒç”¨`sigsetadd`å‡½æ•°ä¿®æ”¹
- æ•æ‰å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œè¢«å±è”½ä¿¡å·å¤šæ¬¡å‘é€ï¼Œè§£é™¤å±è”½ååªå¤„ç†ä¸€æ¬¡ï¼

### å†…æ ¸å®ç°ä¿¡å·æ•æ‰ç®€æ

![3](https://img-blog.csdnimg.cn/direct/5f8317d02e8342cc85fca53fca464068.png#pic_center)

---

## ç»¼åˆç»ƒä¹ 

æˆ‘ä»¬å€ŸåŠ©ä¿¡å·æ•æ‰å›æ”¶å­è¿›ç¨‹
æºä»£ç ï¼š

```c
#include<stdio.h>
#include<unistd.h>
#include<string.h>
#include<signal.h>
#include<sys/wait.h>

void fun(int signal)
{
    while(waitpid(-1,NULL,0)!=-1)
        printf("wait successfully\n");

}

int main()
{
    int i;
    pid_t pid;
     sigset_t set;
    sigemptyset(&set);
    sigaddset(&set,SIGCHLD);
    sigprocmask(SIG_BLOCK,&set,NULL);
    for(i=0;i<15;i++)
    {
        pid=fork();
        if(0==pid)
            break;
    }
    if(15==i)
    {
        struct sigaction act;
        act.sa_handler=fun;
        sigemptyset(&act.sa_mask);
//        sigdelset(&set,SIGCHLD);
        sigprocmask(SIG_UNBLOCK,&set,NULL);
        act.sa_flags=0;
        sigaction(SIGCHLD,&act,NULL);
        printf("i am parent,i wait my all child\n");
        while(1);
    }
    else
    {
        printf("i am %dth child,i will be waited\n",i+1);
    }
    return 0;
}
```

æ•ˆæœï¼š
![4](https://img-blog.csdnimg.cn/direct/07d233ade8f748909028ad71bac61cd9.png#pic_center)

---

## å†™åœ¨æœ€å

ä¸ªäººäº²èº«ç»éªŒï¼šæˆ‘ä»¬å­¦ä¹ çš„ä¸€ç³»åˆ—Linuxå‘½ä»¤ï¼Œä¸€å®šè¦è‡ªå·±**äº²æ‰‹å»æ•²**ã€‚ä¸è¦åªæ˜¯çœ‹åˆ«äººæ•²ä»£ç ï¼Œä¸è¦åªæ˜¯åœç•™åœ¨çœ¼ç›çœ‹ï¼Œè„‘è¢‹ä»¥ä¸ºè‡ªå·±æ‡‚äº†ï¼Œç­‰ä½ å®é™…ä¸Šæ‰‹å»æ•²ä¼šå‘ç°è®¸è®¸å¤šå¤šçš„è¿™æ ·é‚£æ ·çš„é—®é¢˜ã€‚æ­£å¯è°“â€œ**é”®ç›˜æ•²çƒ‚ï¼Œæœˆè–ªè¿‡ä¸‡**â€

---

> å¦‚æœä½ è§‰å¾—æˆ‘å†™çš„é¢˜è§£è¿˜ä¸é”™çš„ï¼Œè¯·å„ä½**ç‹å­å…¬ä¸»**ç§»æ­¥åˆ°æˆ‘çš„å…¶ä»–é¢˜è§£çœ‹çœ‹
> 
> 1. **æ•°æ®ç»“æ„ä¸ç®—æ³•éƒ¨åˆ†ï¼ˆè¿˜åœ¨æ›´æ–°ä¸­ï¼‰ï¼š**
>    - [***C++ STLæ€»ç»“ - åŸºäºç®—æ³•ç«èµ›ï¼ˆå¼ºåŠ›æ¨è***ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135051716?spm=1001.2014.3001.5501)
>    - [åŠ¨æ€è§„åˆ’â€”â€”å®Œå…¨èƒŒåŒ…é—®é¢˜](https://blog.csdn.net/yourgrandfather_/article/details/135111459)
>    - [åŠ¨æ€è§„åˆ’â€”â€”01èƒŒåŒ…é—®é¢˜](https://blog.csdn.net/yourgrandfather_/article/details/135103012?spm=1001.2014.3001.5501)
>    - [åŠ¨æ€è§„åˆ’â€”â€”å¤šé‡èƒŒåŒ…é—®é¢˜](https://blog.csdn.net/yourgrandfather_/article/details/135125267)
>    - [åŠ¨æ€è§„åˆ’â€”â€”åˆ†ç»„èƒŒåŒ…é—®é¢˜](https://blog.csdn.net/yourgrandfather_/article/details/135134277)
>    - [åŠ¨æ€è§„åˆ’â€”â€”æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLIS)](https://blog.csdn.net/yourgrandfather_/article/details/135150351)
>    - [äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆä¸‰ç§æ–¹æ³•ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135167817)
>    - [æœ€é•¿å›æ–‡å­ä¸²](https://blog.csdn.net/yourgrandfather_/article/details/135183977)
>    - [æœ€çŸ­è·¯ç®—æ³•â€”â€”Dijkstraï¼ˆC++å®ç°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/134869064?spm=1001.2014.3001.5501)
>    - [æœ€çŸ­è·¯ç®—æ³•â€”â€”â€”Bellman_Fordç®—æ³•ï¼ˆC++å®ç°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/134935786?spm=1001.2014.3001.5501)
>    - [æœ€çŸ­è·¯ç®—æ³•â€”â€”â€”SPFAç®—æ³•ï¼ˆC++å®ç°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135004393?spm=1001.2014.3001.5501)
>    - [æœ€å°ç”Ÿæˆæ ‘ç®—æ³•â€”â€”â€”primç®—æ³•ï¼ˆC++å®ç°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135026901?spm=1001.2014.3001.5501)
>    - [æœ€å°ç”Ÿæˆæ ‘ç®—æ³•â€”â€”â€”Kruskalç®—æ³•ï¼ˆC++å®ç°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135039904?spm=1001.2014.3001.5501)
>    - [æŸ“è‰²æ³•åˆ¤æ–­äºŒåˆ†å›¾ï¼ˆC++å®ç°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135094296?spm=1001.2014.3001.5501)
> 2. **Linuxéƒ¨åˆ†ï¼ˆè¿˜åœ¨æ›´æ–°ä¸­ï¼‰ï¼š**
>    - [Linuxå­¦ä¹ ä¹‹åˆè¯†Linux](https://blog.csdn.net/yourgrandfather_/article/details/134953315?spm=1001.2014.3001.5501)
>    - [Linuxå­¦ä¹ ä¹‹å‘½ä»¤è¡ŒåŸºç¡€æ“ä½œ](https://blog.csdn.net/yourgrandfather_/article/details/134956923?spm=1001.2014.3001.5501)
>    - [Linuxå­¦ä¹ ä¹‹åŸºç¡€å‘½ä»¤ï¼ˆé€‚åˆå°ç™½ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135189166)
>    - [Linuxå­¦ä¹ ä¹‹æƒé™ç®¡ç†å’Œç”¨æˆ·ç®¡ç†](https://blog.csdn.net/yourgrandfather_/article/details/135222868)
>    - [Linuxå­¦ä¹ ä¹‹åˆ¶ä½œé™æ€åº“å’ŒåŠ¨æ€åº“](https://blog.csdn.net/yourgrandfather_/article/details/135275850)
>    - [Linuxå­¦ä¹ ä¹‹makefile](https://blog.csdn.net/yourgrandfather_/article/details/135288190)
>    - [Linuxå­¦ä¹ ä¹‹ç³»ç»Ÿç¼–ç¨‹1ï¼ˆå…³äºè¯»å†™ç³»ç»Ÿå‡½æ•°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135324720)
>    - [Linuxå­¦ä¹ ä¹‹ç³»ç»Ÿç¼–ç¨‹2ï¼ˆå…³äºè¿›ç¨‹åŠå…¶ç›¸å…³çš„å‡½æ•°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135338115)
>    - [Linuxå­¦ä¹ ä¹‹ç³»ç»Ÿç¼–ç¨‹3ï¼ˆè¿›ç¨‹åŠwaitå‡½æ•°ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135354402)
>    - [Linuxå­¦ä¹ ä¹‹ç³»ç»Ÿç¼–ç¨‹4(è¿›ç¨‹é—´é€šä¿¡ï¼‰](https://blog.csdn.net/yourgrandfather_/article/details/135383973)

## âœ¨ğŸ‰æ€»ç»“

â€œç§ä¸€é¢—æ ‘æœ€å¥½çš„æ˜¯åå¹´å‰,å…¶æ¬¡å°±æ˜¯ç°åœ¨â€
æ‰€ä»¥,
â€œè®©æˆ‘ä»¬ä¸€èµ·åŠªåŠ›å§,å»å¥”èµ´æ›´é«˜æ›´è¿œçš„å±±æµ·â€
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/direct/7bb6bf71a1814bd88fb9615df5cc258d.png#pic_center =400x250)
å¦‚æœæœ‰é”™è¯¯âŒ,æ¬¢è¿æŒ‡æ­£å“ŸğŸ˜‹

ğŸ‰å¦‚æœè§‰å¾—æ”¶è·æ»¡æ»¡,å¯ä»¥åŠ¨åŠ¨å°æ‰‹,ç‚¹ç‚¹èµğŸ‘,æ”¯æŒä¸€ä¸‹å“ŸğŸ‰
